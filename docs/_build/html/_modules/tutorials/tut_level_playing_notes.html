<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>tutorials.tut_level_playing_notes &mdash; Guitar-Champions 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../../_static/jquery.js?v=5d32c60e"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="../../_static/documentation_options.js?v=8d563738"></script>
        <script src="../../_static/doctools.js?v=9a2dae69"></script>
        <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Guitar-Champions
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../modules.html">guitar_champions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Guitar-Champions</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">Module code</a></li>
      <li class="breadcrumb-item active">tutorials.tut_level_playing_notes</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <h1>Source code for tutorials.tut_level_playing_notes</h1><div class="highlight"><pre>
<span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This file is for displaying and running through the &quot;Playing Notes&quot; tutorial in the game..</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">pygame</span>

<span class="kn">import</span> <span class="nn">os</span>

<span class="kn">import</span> <span class="nn">copy</span>

<span class="c1"># note recognition imports</span>

<span class="kn">import</span> <span class="nn">pyaudio</span>
<span class="kn">import</span> <span class="nn">wave</span>
<span class="kn">import</span> <span class="nn">librosa</span>
<span class="kn">import</span> <span class="nn">math</span>
<span class="kn">from</span> <span class="nn">scipy.signal</span> <span class="kn">import</span> <span class="n">find_peaks</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>
<span class="kn">import</span> <span class="nn">scipy.signal</span>
<span class="kn">import</span> <span class="nn">crepe</span>
<span class="kn">import</span> <span class="nn">keras</span>
<span class="kn">import</span> <span class="nn">keras.backend</span> <span class="k">as</span> <span class="nn">K</span>
<span class="kn">from</span> <span class="nn">music21</span> <span class="kn">import</span> <span class="n">note</span> <span class="k">as</span> <span class="n">music21Note</span>

<span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s1">&#39;CUDA_VISIBLE_DEVICS&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;-1&#39;</span>
 
<span class="kn">import</span> <span class="nn">tensorflow</span> <span class="k">as</span> <span class="nn">tf</span>

<span class="kn">from</span> <span class="nn">pygame_aseprite_animation</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">helpers.settings_helper</span> <span class="k">as</span> <span class="nn">settings_helper</span>

<span class="kn">import</span> <span class="nn">helpers.tutorial_info</span> <span class="k">as</span> <span class="nn">tutorial_info</span>

<span class="kn">import</span> <span class="nn">partials.buttons.text_button</span> <span class="k">as</span> <span class="nn">text_button</span>

<span class="kn">import</span> <span class="nn">partials.titlecard.title_card</span> <span class="k">as</span> <span class="nn">title_card</span>

<span class="kn">import</span> <span class="nn">partials.tutorial_popup.tutorial_popup</span> <span class="k">as</span> <span class="nn">tutorial_popup</span>

<span class="kn">import</span> <span class="nn">helpers.sprite_item</span> <span class="k">as</span> <span class="nn">sprite_item</span>

<span class="kn">import</span> <span class="nn">partials.notes.text_note</span> <span class="k">as</span> <span class="nn">note</span>

<span class="kn">from</span> <span class="nn">pygame.locals</span> <span class="kn">import</span> <span class="p">(</span>
    <span class="n">RLEACCEL</span><span class="p">,</span>
    <span class="n">K_ESCAPE</span><span class="p">,</span>
    <span class="n">K_RIGHT</span><span class="p">,</span>
    <span class="n">K_LEFT</span><span class="p">,</span>
    <span class="n">KEYDOWN</span><span class="p">,</span>
    <span class="n">QUIT</span><span class="p">,</span>
    <span class="n">K_SPACE</span><span class="p">,</span>
<span class="p">)</span>

<span class="c1"># For keeping track of the last 3 played midi numbers</span>

<span class="n">main_midi_number_arr</span> <span class="o">=</span> <span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">40</span><span class="p">]</span>

<div class="viewcode-block" id="start">
<a class="viewcode-back" href="../../tutorials.html#tutorials.tut_level_playing_notes.start">[docs]</a>
<span class="k">def</span> <span class="nf">start</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This is the main function of the tutorial. It sets the default state of the game to Running.</span>

<span class="sd">    Args:</span>
<span class="sd">        running (bool): boolean for determining if the tutorial is running.</span>
<span class="sd">        paused (bool): boolean for determining if the tutorial is paused.</span>
<span class="sd">        restart_level (bool): boolean for determining if the player wants to restart the tutorial.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">running</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">paused</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">restart_level</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">pauserendered</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">played_example_note8</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">user_settings</span> <span class="o">=</span> <span class="n">settings_helper</span><span class="o">.</span><span class="n">get_settings</span><span class="p">()</span>

    <span class="c1"># Define constants for the screen width and height</span>
    <span class="n">SCREEN_WIDTH</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">get_surface</span><span class="p">()</span><span class="o">.</span><span class="n">get_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">SCREEN_HEIGHT</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">get_surface</span><span class="p">()</span><span class="o">.</span><span class="n">get_size</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">PLAY_LINE_LOCATION</span> <span class="o">=</span> <span class="mi">290</span>


    <span class="c1"># Setup for sounds, defaults are good</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

    <span class="c1"># Initialize pygame</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">init</span><span class="p">()</span>

    <span class="c1"># Setup the clock for a decent framerate</span>
    <span class="n">clock</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">time</span><span class="o">.</span><span class="n">Clock</span><span class="p">()</span>

    <span class="c1"># Create the screen object</span>
    <span class="c1"># The size is determined by the constant SCREEN_WIDTH and SCREEN_HEIGHT</span>
    <span class="n">screen</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">set_mode</span><span class="p">((</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">SCREEN_HEIGHT</span><span class="p">))</span>


    <span class="n">pause_title</span> <span class="o">=</span> <span class="n">title_card</span><span class="o">.</span><span class="n">Titlecard</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;   Paused   &quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span> <span class="mi">350</span><span class="p">,</span><span class="n">height</span><span class="o">=</span> <span class="mi">59</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">175</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">180</span><span class="p">)</span>
    

    <span class="c1"># These are the buttons for the pause menu</span>
    <span class="n">resume_button</span> <span class="o">=</span> <span class="n">text_button</span><span class="o">.</span><span class="n">TextButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Resume &quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span> <span class="mi">96</span><span class="p">,</span><span class="n">height</span><span class="o">=</span> <span class="mi">44</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">50</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">80</span><span class="p">)</span>
    <span class="n">restart_button</span> <span class="o">=</span> <span class="n">text_button</span><span class="o">.</span><span class="n">TextButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Restart &quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span> <span class="mi">94</span><span class="p">,</span><span class="n">height</span><span class="o">=</span> <span class="mi">44</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">48</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">main_menu_button</span> <span class="o">=</span> <span class="n">text_button</span><span class="o">.</span><span class="n">TextButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Main Menu &quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span> <span class="mi">128</span><span class="p">,</span><span class="n">height</span><span class="o">=</span> <span class="mi">44</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">62</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span><span class="mi">60</span><span class="p">)</span>
    <span class="n">quit_button</span> <span class="o">=</span> <span class="n">text_button</span><span class="o">.</span><span class="n">TextButton</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot; Quit &quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span> <span class="mi">60</span><span class="p">,</span><span class="n">height</span><span class="o">=</span> <span class="mi">44</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span><span class="mi">30</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">2</span> <span class="o">+</span> <span class="mi">120</span><span class="p">)</span>



    <span class="c1"># Start Audio</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">pyaudio</span><span class="o">.</span><span class="n">PyAudio</span><span class="p">()</span>

    <span class="n">stream</span> <span class="o">=</span> <span class="n">p</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="nb">format</span><span class="o">=</span><span class="n">pyaudio</span><span class="o">.</span><span class="n">paFloat32</span><span class="p">,</span>
                    <span class="n">channels</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
                    <span class="n">rate</span><span class="o">=</span><span class="mi">16000</span><span class="p">,</span>
                    <span class="nb">input</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">frames_per_buffer</span><span class="o">=</span><span class="mi">2048</span><span class="p">,</span>
                    <span class="n">stream_callback</span><span class="o">=</span><span class="n">audio_callback</span><span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Streaming and processing audio. Press Ctrl+C to stop.&quot;</span><span class="p">)</span>
    <span class="n">stream</span><span class="o">.</span><span class="n">start_stream</span><span class="p">()</span>
    
    <span class="c1"># TODO make the custom sprites for the tutorial</span>
    <span class="c1"># START/////////</span>
    <span class="n">bg_img</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;assets/images/backgrounds/forest.jpeg&#39;</span><span class="p">)</span>
    <span class="n">bg_img</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">bg_img</span><span class="p">,(</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span><span class="n">SCREEN_HEIGHT</span><span class="p">))</span>

    <span class="c1">#  the background image of the tabs</span>
    <span class="n">tabs_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;assets/images/backgrounds/tabs_outline.png&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
    <span class="n">tabs_image</span><span class="o">.</span><span class="n">set_colorkey</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">RLEACCEL</span><span class="p">)</span>

    <span class="c1"># the image of the line where the ntoes should be when played</span>
    <span class="n">play_line_image</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s2">&quot;assets/images/backgrounds/play_line.png&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">convert</span><span class="p">()</span>
    <span class="n">play_line_image</span><span class="o">.</span><span class="n">set_colorkey</span><span class="p">((</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">),</span> <span class="n">RLEACCEL</span><span class="p">)</span>

    <span class="c1"># set aseprite file directory</span>
    <span class="n">dirname</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span>
    <span class="n">aseprite_file_directory</span> <span class="o">=</span> <span class="s1">&#39;assets/animations/rjgwgMOVINGHANDTOPLAY1.aseprite&#39;</span>

    <span class="c1">#guitar guy animations</span>
    <span class="n">test_animation</span> <span class="o">=</span> <span class="n">Animation</span><span class="p">(</span><span class="n">aseprite_file_directory</span><span class="p">)</span>
    <span class="n">animationmanager</span> <span class="o">=</span> <span class="n">AnimationManager</span><span class="p">([</span><span class="n">test_animation</span><span class="p">],</span> <span class="n">screen</span><span class="p">)</span>
    <span class="n">strumAnimation</span> <span class="o">=</span> <span class="n">Animation</span><span class="p">(</span><span class="s1">&#39;assets/animations/rjgwgSTRUMMINGGUITAR1.aseprite&#39;</span><span class="p">)</span>
    <span class="n">animationmanager2</span> <span class="o">=</span> <span class="n">AnimationManager</span><span class="p">([</span><span class="n">strumAnimation</span><span class="p">],</span> <span class="n">screen</span><span class="p">)</span>

    <span class="n">example_note1</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note1</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>

    <span class="n">example_note2</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note2</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">290</span><span class="p">)</span>
    <span class="n">example_note2</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>

    <span class="n">example_note3</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note3</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">210</span><span class="p">)</span>
    <span class="n">example_note3</span><span class="o">.</span><span class="n">set_played_color</span><span class="p">()</span>

    <span class="n">example_note4</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note4</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">210</span><span class="p">)</span>
    <span class="n">example_note4</span><span class="o">.</span><span class="n">set_missed_color</span><span class="p">()</span>

    <span class="n">example_note5</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note5</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
    <span class="n">example_note5</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>

    <span class="n">example_note6</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note6</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
    <span class="n">example_note6</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>

    <span class="n">example_note7</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note7</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">500</span><span class="p">)</span>
    <span class="n">example_note7</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>

    <span class="n">example_note8</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">41</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">example_note8</span><span class="o">.</span><span class="n">set_x_location</span><span class="p">(</span><span class="mi">290</span><span class="p">)</span>
    <span class="n">example_note8</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>

    <span class="n">frames_since_note</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># this is a multiplier that is used to figure out how many beats later the next note should come</span>
    <span class="c1"># after each note is created this is dynamically updated by calling a function on that note</span>
    <span class="c1"># 1.0 means that the next note plays one beat later, 2.0 is 2 beats later while 0.5 would be half a beat later</span>
    <span class="n">time_to_next_note</span> <span class="o">=</span> <span class="mf">1.0</span>

    <span class="n">Notes</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>

    <span class="n">note_index</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="c1"># This is the array with the song&#39;s note information</span>
    <span class="n">song_notes</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">64</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">65</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">66</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">67</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">59</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">61</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">62</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">55</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">56</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">57</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">58</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">51</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">52</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">53</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">46</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">47</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">48</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;0&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">41</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">2</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;2&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">42</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
        <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;3&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">43</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">4</span><span class="p">),</span>
       
        <span class="p">]</span>


    <span class="n">curr_tutorial_info</span> <span class="o">=</span> <span class="n">tutorial_info</span><span class="o">.</span><span class="n">TutorialInfo</span><span class="p">(</span>
         <span class="n">popup_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1">#   1</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;Welcome to the Playing Notes tutorial! Press the next button on screen or use the arrow keys to navigate&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">),</span>
             <span class="c1">#   2</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;In this game, notes, like this will glide across the screen and you&#39;ll need to play them once they change to blue&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note1</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            <span class="c1">#   3</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;When they change to Blue they&#39;ll look like this&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note2</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
             <span class="c1">#   4</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;If you play them correctly they&#39;ll change to Green&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note3</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
             <span class="c1">#   5</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;But if you play them incorrectly they&#39;ll change to Red&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note4</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            <span class="c1">#   6</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;We are using tab notation to represent notes. So a note on the top line here would be played on the bottom string (This is called the first string).&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note5</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            <span class="c1">#   7</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;While a note on the bottom line here would be played on the top string (This is called the 6th string).&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note6</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            <span class="c1">#   8</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;The fret of the note is represented by its number. In this case the number is 0 which means you just pluck the string without pressing down a fret.&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note6</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            <span class="c1">#   9</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;While for this one, the number is 1 which means you hold down the string at the first fret and then pluck the string&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">250</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note7</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
            
            <span class="c1">#   10</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;PLAY THIS NOTE! You&#39;ll press down your finger on the top string at the first fret and pluck the string. When it changes to green you&#39;ve played it correctly.&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">show_hightlight_region</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">highlight_region_position</span><span class="o">=</span><span class="n">example_note8</span><span class="o">.</span><span class="n">rect</span><span class="p">,</span> <span class="n">highlight_region_color</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">trigger_effect_number</span><span class="o">=</span><span class="mi">2</span><span class="p">,),</span>
             <span class="c1">#   11</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;On the next screen you can practice playing notes as they come across the screen. Don&#39;t worry you can practice as long as you need. :)&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,),</span>
            <span class="c1">#   12</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;THIS IS PRACTICE! Don&#39;t worry about not hitting notes :)&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">trigger_effect_number</span><span class="o">=</span><span class="mi">3</span><span class="p">,),</span>
            <span class="c1">#   13</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;Now, on the next screen you can practice playing different notes as they come across the screen. Don&#39;t worry you can practice as long as you need. :)&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">trigger_effect_number</span><span class="o">=</span><span class="mi">5</span><span class="p">),</span>
            <span class="c1">#   14</span>
              <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;THIS IS PRACTICE! Don&#39;t worry about not hitting notes :)&quot;</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span><span class="mi">400</span><span class="p">,</span> <span class="n">trigger_effect_number</span><span class="o">=</span><span class="mi">4</span><span class="p">,),</span>
           
            <span class="c1"># END</span>
            <span class="n">tutorial_popup</span><span class="o">.</span><span class="n">TutorialPopup</span><span class="p">(</span><span class="s2">&quot;Now you&#39;re ready to try out a song!&quot;</span><span class="p">,</span> <span class="n">top_padding</span><span class="o">=</span> <span class="mi">220</span><span class="p">,</span> <span class="n">left_padding</span><span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">trigger_effect_number</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">is_final_popup</span><span class="o">=</span><span class="kc">True</span><span class="p">,),</span>


              <span class="p">],</span>
         <span class="n">sprites_list</span> <span class="o">=</span> <span class="p">[</span>
            <span class="c1"># 1</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   
                   <span class="p">],</span>
                   <span class="c1"># 2</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note1</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note1</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                   <span class="c1"># 3</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note2</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note2</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                   <span class="c1"># 4</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note3</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note3</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                   <span class="c1"># 5</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note4</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note4</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                <span class="c1">#    6</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note5</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note5</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                <span class="c1">#    7</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note6</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note6</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>
                    <span class="c1">#    8</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note6</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note6</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>

                     <span class="c1">#    9</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note7</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note7</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>


                    <span class="c1">#    10</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note8</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note8</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                   
                   <span class="p">],</span>

                   <span class="c1">#    11</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                  
                   
                   <span class="p">],</span>

                   <span class="c1">#    12</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                  
                   
                   <span class="p">],</span>

                   <span class="c1">#    13</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                  
                   
                   <span class="p">],</span>

                    <span class="c1">#     14</span>
                <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                  
                   
                   <span class="p">],</span>

                


                   <span class="c1"># END</span>
              <span class="p">[</span>
                   <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="n">is_background</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                   <span class="p">],</span>

         <span class="p">],</span>
    <span class="p">)</span>


    <span class="c1"># END/////////</span>

    <span class="n">current_popup</span> <span class="o">=</span> <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">current_popup</span>

   
    <span class="n">current_sprites</span> <span class="o">=</span> <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">current_sprites</span>

    
    
    


    <span class="c1"># The main loop</span>
    <span class="k">while</span> <span class="n">running</span><span class="p">:</span>

        <span class="c1"># PAUSED LOOP</span>
        <span class="k">if</span> <span class="n">paused</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
              
            <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>

                <span class="c1"># Did the user hit a key?</span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">KEYDOWN</span><span class="p">:</span>

                    <span class="c1"># Was it the Escape key? If so, stop the loop</span>
                    <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_ESCAPE</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_SPACE</span><span class="p">:</span>
                        <span class="n">paused</span> <span class="o">=</span> <span class="kc">False</span>
                        

                    <span class="c1"># Did the user click the window close button? If so, exit</span>
                    <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>


                 <span class="c1"># Here we check for hover events </span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEMOTION</span><span class="p">:</span>
                    <span class="n">resume_button</span><span class="o">.</span><span class="n">on_hover</span><span class="p">()</span>
                    <span class="n">restart_button</span><span class="o">.</span><span class="n">on_hover</span><span class="p">()</span>
                    <span class="n">main_menu_button</span><span class="o">.</span><span class="n">on_hover</span><span class="p">()</span>
                    <span class="n">quit_button</span><span class="o">.</span><span class="n">on_hover</span><span class="p">()</span>
                <span class="c1"># Here we check for clicks events </span>
                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEBUTTONDOWN</span><span class="p">:</span>
                    <span class="c1"># text_buttons should be pressed like this</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">resume_button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                        <span class="n">paused</span> <span class="o">=</span> <span class="kc">False</span>
                        <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">music</span><span class="o">.</span><span class="n">unpause</span><span class="p">()</span>
                    <span class="k">elif</span><span class="p">(</span><span class="n">restart_button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                        
                        <span class="n">restart_level</span> <span class="o">=</span> <span class="kc">True</span>
                        <span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">elif</span><span class="p">(</span><span class="n">main_menu_button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                        <span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
                    <span class="k">elif</span><span class="p">(</span><span class="n">quit_button</span><span class="o">.</span><span class="n">is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                        <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>



            <span class="k">if</span><span class="p">(</span><span class="ow">not</span> <span class="n">pauserendered</span><span class="p">):</span>
                    <span class="n">s</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">Surface</span><span class="p">((</span><span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">*</span><span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">4</span><span class="p">))</span> 
                    <span class="n">s</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mi">140</span><span class="p">)</span>                
                    <span class="n">s</span><span class="o">.</span><span class="n">fill</span><span class="p">((</span><span class="mi">239</span><span class="p">,</span><span class="mi">159</span><span class="p">,</span><span class="mi">20</span><span class="p">))</span>           
                    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="p">(</span><span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">8</span><span class="p">))</span>
                    <span class="n">pauserendered</span><span class="o">=</span><span class="kc">True</span>

            <span class="c1">#border around entire pause menu</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">pygame</span><span class="o">.</span><span class="n">Rect</span><span class="p">(</span><span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">4</span><span class="p">,</span><span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">8</span><span class="p">,</span><span class="n">SCREEN_WIDTH</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="o">*</span><span class="n">SCREEN_HEIGHT</span><span class="o">/</span><span class="mi">4</span><span class="p">),</span><span class="mi">5</span><span class="p">)</span>  
            <span class="c1"># This visually updates the buttons on the pause screen and draws borders around them on render</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">pause_title</span><span class="o">.</span><span class="n">render</span><span class="p">,</span> <span class="n">pause_title</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>  
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">pause_title</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span>  
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">resume_button</span><span class="o">.</span><span class="n">render</span><span class="p">,</span> <span class="n">resume_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">resume_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">restart_button</span><span class="o">.</span><span class="n">render</span><span class="p">,</span> <span class="n">restart_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">restart_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">main_menu_button</span><span class="o">.</span><span class="n">render</span><span class="p">,</span> <span class="n">main_menu_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">main_menu_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
            
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">quit_button</span><span class="o">.</span><span class="n">render</span><span class="p">,</span> <span class="n">quit_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">quit_button</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">clock</span><span class="o">.</span><span class="n">tick_busy_loop</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>
        

        <span class="c1"># NON-PAUSED LOOP</span>

        <span class="k">else</span><span class="p">:</span>

            
            <span class="n">current_popup</span> <span class="o">=</span> <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">current_popup</span>
            <span class="n">current_sprites</span> <span class="o">=</span> <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">current_sprites</span>



            <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">2</span><span class="p">):</span>
                                    

                                    <span class="k">if</span> <span class="p">(</span><span class="n">example_note8</span><span class="o">.</span><span class="n">check_correct_note</span><span class="p">(</span><span class="n">main_midi_number_arr</span><span class="p">)):</span>
                                        <span class="c1"># print(&quot;Correct note was played&quot;)</span>
                                        <span class="n">played_example_note8</span> <span class="o">=</span> <span class="kc">True</span>


                                    <span class="k">if</span><span class="p">(</span><span class="n">played_example_note8</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                                        <span class="n">example_note8</span><span class="o">.</span><span class="n">set_played_color</span><span class="p">()</span>
                                        <span class="n">current_sprites</span> <span class="o">=</span> <span class="p">[</span>
                                            <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                            <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                            <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                            <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span> <span class="n">example_note8</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">example_note8</span><span class="o">.</span><span class="n">rect</span><span class="p">),</span>
                                            <span class="p">]</span>
                                        
            <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">5</span><span class="p">):</span>
                <span class="n">Notes</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
                <span class="n">note_index</span> <span class="o">=</span> <span class="mi">0</span>
                                        
            <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                <span class="c1"># This adds notes every second</span>
                <span class="c1"># This uses the current fps so that you are adding notes accurately</span>
                <span class="k">if</span> <span class="n">frames_since_note</span> <span class="o">&gt;=</span> <span class="p">((</span><span class="n">clock</span><span class="o">.</span><span class="n">get_fps</span><span class="p">()</span> <span class="o">*</span> <span class="n">time_to_next_note</span> <span class="p">)</span><span class="o">//</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">clock</span><span class="o">.</span><span class="n">get_fps</span><span class="p">()</span> <span class="o">&gt;</span> <span class="mf">0.1</span><span class="p">):</span>
                        <span class="n">frames_since_note</span> <span class="o">=</span> <span class="mi">0</span>

                        <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
                            <span class="n">new_Note</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="s2">&quot;1&quot;</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="mi">41</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="mf">2.0</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="mi">6</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">SCREEN_WIDTH</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">SCREEN_HEIGHT</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                            <span class="n">time_to_next_note</span> <span class="o">=</span> <span class="mf">4.0</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                            <span class="c1"># This ensures that this makes the note a deep copy</span>
                            <span class="n">new_Note</span> <span class="o">=</span> <span class="n">note</span><span class="o">.</span><span class="n">Note</span><span class="p">(</span><span class="n">text</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">text</span><span class="p">,</span> <span class="n">midi</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">midi</span><span class="p">,</span> <span class="n">time_to_next_note</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">time_to_next_note</span><span class="p">,</span> <span class="n">tab_line</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">tab_line</span><span class="p">,</span> <span class="n">Screen_Width</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">Screen_Width</span><span class="p">,</span> <span class="n">Screen_Height</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">Screen_Height</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">id</span><span class="p">),</span>
        
                            <span class="n">time_to_next_note</span> <span class="o">=</span> <span class="n">song_notes</span><span class="p">[</span><span class="n">note_index</span><span class="p">]</span><span class="o">.</span><span class="n">get_time_to_next_note</span><span class="p">()</span>
                            <span class="c1"># print(&quot;Current note index&quot;)</span>
                            <span class="c1"># print(note_index)</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">note_index</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">song_notes</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
                                <span class="n">note_index</span> <span class="o">=</span> <span class="n">note_index</span> <span class="o">+</span> <span class="mi">1</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">note_index</span> <span class="o">=</span> <span class="mi">0</span>


                        <span class="n">Notes</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">new_Note</span><span class="p">)</span>
                        <span class="c1"># print(&quot;Added a new note&quot;)</span>
                        
                       
                <span class="n">frames_since_note</span> <span class="o">+=</span> <span class="mi">1</span>

                <span class="n">Notes</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
                <span class="c1"># print(&quot;Notes were updated&quot;)</span>
                <span class="k">for</span> <span class="n">curr_note</span> <span class="ow">in</span> <span class="n">Notes</span><span class="p">:</span>
                    <span class="c1"># print(&quot;For each note&quot;)</span>
                    <span class="c1"># This loops through all the notes on screen</span>
                    <span class="k">if</span> <span class="nb">abs</span><span class="p">((</span><span class="n">PLAY_LINE_LOCATION</span><span class="o">-</span><span class="mi">200</span><span class="p">)</span> <span class="o">-</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">get_x_location</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">20</span><span class="p">:</span>

                        <span class="c1"># This triggers if the note is the one on screen</span>
                        <span class="c1"># This is a function from the note that we check to see if it&#39;s key was the one pressed</span>
                        <span class="c1"># print(&quot;MIDI Number: &quot;,main_midi_number)</span>
                        <span class="k">if</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">check_correct_note</span><span class="p">(</span><span class="n">main_midi_number_arr</span><span class="p">):</span>
                            <span class="n">curr_note</span><span class="o">.</span><span class="n">was_played</span><span class="o">=</span><span class="kc">True</span>
                            <span class="c1"># print(&quot;Correct note played&quot;)</span>
                            
                        
                    <span class="k">if</span> <span class="p">(</span><span class="nb">abs</span><span class="p">(</span><span class="n">PLAY_LINE_LOCATION</span> <span class="o">-</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">get_x_location</span><span class="p">())</span> <span class="o">&lt;</span> <span class="mi">25</span><span class="p">)</span> <span class="p">:</span>
                                    <span class="c1"># it checks to see if the note is close enough to the play line to update</span>
                                    
                                    

                        <span class="k">if</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">get_is_active</span><span class="p">()</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
                            <span class="c1"># if the note is currently note active</span>
                            <span class="n">curr_note</span><span class="o">.</span><span class="n">set_active_color</span><span class="p">()</span>


                    <span class="k">else</span><span class="p">:</span>
                         <span class="k">if</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">get_is_active</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                            <span class="c1"># if it is leaving the play line regio</span>
                            <span class="k">if</span><span class="p">((</span><span class="n">curr_note</span><span class="o">.</span><span class="n">get_x_location</span><span class="p">()</span> <span class="o">&lt;</span> <span class="p">(</span><span class="n">PLAY_LINE_LOCATION</span> <span class="o">-</span> <span class="mi">200</span><span class="p">))):</span>
                                <span class="k">if</span> <span class="n">curr_note</span><span class="o">.</span><span class="n">get_was_played</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                                    <span class="c1"># if note was played successfully</span>
                                    <span class="n">curr_note</span><span class="o">.</span><span class="n">set_played_color</span><span class="p">()</span>
                                <span class="k">else</span><span class="p">:</span>
                                    <span class="c1"># if the note was not played successfully</span>
                                    <span class="n">curr_note</span><span class="o">.</span><span class="n">set_missed_color</span><span class="p">()</span>
                                

                

            <span class="k">for</span> <span class="n">event</span> <span class="ow">in</span> <span class="n">pygame</span><span class="o">.</span><span class="n">event</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>

                            <span class="c1"># Did the user hit a key?</span>
                            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">KEYDOWN</span><span class="p">:</span>

                                <span class="c1"># Was it the Escape key? If so, stop the loop</span>
                                <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_ESCAPE</span> <span class="ow">or</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_SPACE</span><span class="p">:</span>
                                    <span class="n">paused</span> <span class="o">=</span> <span class="kc">True</span>
                                    <span class="n">pauserendered</span> <span class="o">=</span> <span class="kc">False</span>
                                    <span class="c1"># print(&quot;paused the game&quot;)</span>

                                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_RIGHT</span><span class="p">:</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                                        <span class="n">Notes</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
                                        <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_list</span><span class="p">[</span><span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> 
                                        <span class="p">]</span>
                                     
                                     <span class="c1"># TODO Add custom next code here</span>
                                    <span class="c1"># START/////////</span>
                                    <span class="c1"># if current_popup.trigger_effect_number == 1:</span>
                                        <span class="c1"># print(&quot;Trigger effect 1&quot;)</span>

                                    <span class="c1"># END/////////</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">is_final_popup</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                                        <span class="c1"># True if this is the final popup of the tutorial</span>
                                        <span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
                                    <span class="k">else</span><span class="p">:</span>
                                    <span class="c1"># go to the next tutorial</span>
                                        <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
                                    

                                <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">key</span> <span class="o">==</span> <span class="n">K_LEFT</span><span class="p">:</span>
                                    <span class="c1"># TODO Add custom previous code here</span>
                                    <span class="c1"># START/////////</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                                        <span class="n">Notes</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
                                        <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_list</span><span class="p">[</span><span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> 
                                        <span class="p">]</span>

                                    <span class="c1"># END/////////</span>
                                    <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">previous</span><span class="p">()</span>

                            <span class="c1"># Did the user click the window close button? If so, exit</span>
                            <span class="k">elif</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">QUIT</span><span class="p">:</span>
                                <span class="n">os</span><span class="o">.</span><span class="n">_exit</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

                            <span class="c1"># Here we check for hover events </span>
                            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEMOTION</span><span class="p">:</span>
                                <span class="n">current_popup</span><span class="o">.</span><span class="n">button_on_hover</span><span class="p">()</span>

                                <span class="c1"># TODO Add the hover effects for this tutorials example buttons</span>
                                <span class="c1"># START/////////</span>
                                
                               
                                <span class="c1"># END/////////</span>
                                
                        

                            <span class="c1"># Here we check for clicks events </span>
                            <span class="k">if</span> <span class="n">event</span><span class="o">.</span><span class="n">type</span><span class="o">==</span><span class="n">pygame</span><span class="o">.</span><span class="n">MOUSEBUTTONDOWN</span><span class="p">:</span>

                                <span class="c1"># text_buttons should be pressed like this</span>
                                <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">button_is_pressed</span><span class="p">()</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                                    <span class="c1"># print(&quot;Current popup pressed&quot;)</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                                        <span class="n">Notes</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">sprite</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>
                                        <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_list</span><span class="p">[</span><span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">sprites_index</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">bg_img</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">tabs_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span>
                                        <span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span> <span class="o">=</span> <span class="n">play_line_image</span><span class="p">,</span> <span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)),</span> 
                                        <span class="p">]</span>
                                    <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">is_final_popup</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                                        <span class="c1"># True if this is the final popup of the tutorial</span>
                                        <span class="n">running</span> <span class="o">=</span> <span class="kc">False</span>
                                    <span class="k">else</span><span class="p">:</span>
                                    <span class="c1"># go to the next tutorial</span>
                                        <span class="n">curr_tutorial_info</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

                                    <span class="c1"># TODO Add custom next code here</span>
                                    <span class="c1"># START/////////</span>

                                    <span class="c1"># if current_popup.trigger_effect_number == 1:</span>
                                    <span class="c1">#     print(&quot;Trigger effect 1&quot;)</span>

                                    <span class="c1"># END/////////</span>


                                 <span class="c1"># TODO Add the click effects for this tutorials example buttons</span>
                                    <span class="c1"># START/////////</span>
                                        <span class="c1"># you should make certain you&#39;re on the correct screen before allowing the button to be pressed</span>

                                

          
                                

                                        
                                <span class="c1"># END/////////</span>
            

            <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">3</span> <span class="ow">or</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">trigger_effect_number</span> <span class="o">==</span> <span class="mi">4</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">entity</span> <span class="ow">in</span> <span class="n">Notes</span><span class="p">:</span>
                    <span class="n">current_sprites</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sprite_item</span><span class="o">.</span><span class="n">SpriteItem</span><span class="p">(</span><span class="n">sprite</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">surf</span><span class="p">,</span> <span class="n">location</span><span class="o">=</span><span class="n">entity</span><span class="o">.</span><span class="n">rect</span><span class="p">))</span>

            
            <span class="k">for</span> <span class="n">curr_sprite_item</span> <span class="ow">in</span> <span class="n">current_sprites</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">is_box</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                    <span class="c1"># If the current sprite is a box</span>

                    <span class="k">if</span> <span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_has_border</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="c1">#  If the box does have a border</span>
                        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_color</span><span class="p">,</span><span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_rect</span><span class="p">,</span> <span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_border</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="c1"># If the box has no border</span>
                        <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_color</span><span class="p">,</span><span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">box_rect</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="c1"># If the current sprite is not a box</span>
                    <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">sprite</span><span class="p">,</span> <span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">location</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">curr_sprite_item</span><span class="o">.</span><span class="n">is_background</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
                        <span class="c1"># load tutorial box frame</span>
                        <span class="n">tutframe</span> <span class="o">=</span> <span class="n">pygame</span><span class="o">.</span><span class="n">image</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;assets/images/backgrounds/frame.png&#39;</span><span class="p">)</span>
                        <span class="n">tutframe</span><span class="o">.</span><span class="n">set_alpha</span><span class="p">(</span><span class="mi">140</span><span class="p">)</span>
                        <span class="n">tutframe</span><span class="o">=</span><span class="n">pygame</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="n">scale</span><span class="p">(</span><span class="n">tutframe</span><span class="p">,(</span><span class="mi">381</span><span class="p">,</span><span class="mi">360</span><span class="p">))</span>
                        <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">tutframe</span><span class="p">,(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">outline_position</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="mi">46</span><span class="p">,</span><span class="n">current_popup</span><span class="o">.</span><span class="n">outline_position</span><span class="o">.</span><span class="n">y</span><span class="o">-</span><span class="mi">70</span><span class="p">))</span>




            <span class="c1"># TODO This is the animation of the player</span>
            <span class="n">animationmanager2</span><span class="o">.</span><span class="n">update_self</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">390</span><span class="p">)</span>

            

            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">current_popup</span><span class="o">.</span><span class="n">outline_color</span><span class="p">,</span><span class="n">current_popup</span><span class="o">.</span><span class="n">outline_position</span><span class="p">)</span>

            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">line1_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">line1_position</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">line2_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">line2_position</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">line3_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">line3_position</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">line4_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">line4_position</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">line5_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">line5_position</span><span class="p">)</span>

            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">number_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">number_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">209</span><span class="p">,</span><span class="mi">129</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">current_popup</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">screen</span><span class="o">.</span><span class="n">blit</span><span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">button_render</span><span class="p">,</span> <span class="n">current_popup</span><span class="o">.</span><span class="n">button_position</span><span class="p">)</span>
            <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,(</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">,</span><span class="mi">255</span><span class="p">),</span><span class="n">current_popup</span><span class="o">.</span><span class="n">button_position</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">current_popup</span><span class="o">.</span><span class="n">show_hightlight_region</span> <span class="o">==</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">pygame</span><span class="o">.</span><span class="n">draw</span><span class="o">.</span><span class="n">rect</span><span class="p">(</span><span class="n">screen</span><span class="p">,</span><span class="n">current_popup</span><span class="o">.</span><span class="n">highlight_region_color</span><span class="p">,</span><span class="n">current_popup</span><span class="o">.</span><span class="n">highlight_region_position</span><span class="o">.</span><span class="n">scale_by</span><span class="p">(</span><span class="mf">1.4</span><span class="p">),</span> <span class="mi">5</span><span class="p">)</span>

            


            <span class="n">pygame</span><span class="o">.</span><span class="n">display</span><span class="o">.</span><span class="n">update</span><span class="p">()</span>
            <span class="n">clock</span><span class="o">.</span><span class="n">tick_busy_loop</span><span class="p">(</span><span class="mi">30</span><span class="p">)</span>


    <span class="c1"># print(&quot;Exiting&quot;)</span>
    <span class="c1"># print(restart_level)</span>
     <span class="c1"># Stop Audio</span>
    <span class="n">stream</span><span class="o">.</span><span class="n">stop_stream</span><span class="p">()</span>
    <span class="n">stream</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    <span class="n">p</span><span class="o">.</span><span class="n">terminate</span><span class="p">()</span>

    <span class="c1"># At this point, we&#39;re done, so we can stop and quit the mixer</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">music</span><span class="o">.</span><span class="n">stop</span><span class="p">()</span>
    <span class="n">pygame</span><span class="o">.</span><span class="n">mixer</span><span class="o">.</span><span class="n">quit</span><span class="p">()</span>

   
    

    <span class="c1"># If the level should be restarted the restart it</span>
    <span class="k">if</span> <span class="n">restart_level</span> <span class="o">==</span> <span class="kc">True</span><span class="p">:</span>
        <span class="c1"># print(&quot;Restart level was true&quot;)</span>
        <span class="n">start</span><span class="p">()</span></div>


    <span class="c1"># print(&quot;This happened&quot;)</span>
    <span class="c1"># return</span>




<span class="c1"># Define bandpass filter</span>
<div class="viewcode-block" id="butter_bandpass_filter">
<a class="viewcode-back" href="../../tutorials.html#tutorials.tut_level_playing_notes.butter_bandpass_filter">[docs]</a>
<span class="k">def</span> <span class="nf">butter_bandpass_filter</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">lowcut</span><span class="p">,</span> <span class="n">highcut</span><span class="p">,</span> <span class="n">sr</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="mi">5</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Apply a Butterworth bandpass filter to a given data array.</span>

<span class="sd">    This function constructs a Butterworth bandpass filter using the specified low and</span>
<span class="sd">    high cutoff frequencies and filter order, then applies it to the input data array.</span>
<span class="sd">    The function is suitable for filtering time-series data to retain only the</span>
<span class="sd">    frequencies within the specified band.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (array_like): Input signal data as a numeric array.</span>
<span class="sd">        lowcut (float): The lower boundary of the frequency range to be retained in Hz.</span>
<span class="sd">        highcut (float): The upper boundary of the frequency range to be retained in Hz.</span>
<span class="sd">        sr (int): The sampling rate of the data in Hz.</span>
<span class="sd">        order (int, optional): The order of the filter. Higher order means a steeper</span>
<span class="sd">                               filter slope. Default is 5.</span>

<span class="sd">    Returns:</span>
<span class="sd">        array_like: The filtered signal data, same shape as input `data`.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    
    <span class="n">nyquist</span> <span class="o">=</span> <span class="mf">0.5</span> <span class="o">*</span> <span class="n">sr</span>
    <span class="n">low</span> <span class="o">=</span> <span class="n">lowcut</span> <span class="o">/</span> <span class="n">nyquist</span>
    <span class="n">high</span> <span class="o">=</span> <span class="n">highcut</span> <span class="o">/</span> <span class="n">nyquist</span>
    <span class="n">b</span><span class="p">,</span> <span class="n">a</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">butter</span><span class="p">(</span><span class="n">order</span><span class="p">,</span> <span class="p">[</span><span class="n">low</span><span class="p">,</span> <span class="n">high</span><span class="p">],</span> <span class="n">btype</span><span class="o">=</span><span class="s1">&#39;band&#39;</span><span class="p">)</span>
    <span class="n">y</span> <span class="o">=</span> <span class="n">scipy</span><span class="o">.</span><span class="n">signal</span><span class="o">.</span><span class="n">lfilter</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="n">a</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">y</span></div>


<div class="viewcode-block" id="midi_number_to_pitch">
<a class="viewcode-back" href="../../tutorials.html#tutorials.tut_level_playing_notes.midi_number_to_pitch">[docs]</a>
<span class="k">def</span> <span class="nf">midi_number_to_pitch</span><span class="p">(</span><span class="n">midi_number</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Convert a MIDI number to its corresponding musical pitch notation including the octave.</span>

<span class="sd">    This function uses the `music21` library to map MIDI note numbers to their</span>
<span class="sd">    corresponding pitch names and octaves, such as C4, A5, etc.</span>

<span class="sd">    Args:</span>
<span class="sd">        midi_number (int): The MIDI number representing the musical note. MIDI numbers</span>
<span class="sd">                           range from 0 (C-1) to 127 (G9), representing specific pitches.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The musical pitch name with octave notation (e.g., C4, A5).</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="n">music21Note</span><span class="o">.</span><span class="n">Note</span><span class="p">()</span>
    <span class="n">n</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">midi</span> <span class="o">=</span> <span class="n">midi_number</span>
    <span class="k">return</span> <span class="n">n</span><span class="o">.</span><span class="n">pitch</span><span class="o">.</span><span class="n">nameWithOctave</span></div>


<div class="viewcode-block" id="audio_callback">
<a class="viewcode-back" href="../../tutorials.html#tutorials.tut_level_playing_notes.audio_callback">[docs]</a>
<span class="k">def</span> <span class="nf">audio_callback</span><span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">frame_count</span><span class="p">,</span> <span class="n">time_info</span><span class="p">,</span> <span class="n">status</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Callback function for processing real-time audio input through PyAudio.</span>

<span class="sd">    This function takes audio input data, applies a bandpass filter, and analyzes</span>
<span class="sd">    the pitch using CREPE. It prints the detected pitch, frequency, confidence level,</span>
<span class="sd">    and amplitude of the filtered audio.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_data (array of bytes): Raw audio data in bytes array format, which</span>
<span class="sd">                                  will be converted to float32 for processing.</span>
<span class="sd">        frame_count (int): Number of frames in the input data. This is used to</span>
<span class="sd">                           ensure the data block size remains consistent.</span>
<span class="sd">        time_info (dict): Dictionary containing timing information including</span>
<span class="sd">                          keys like &#39;current_time&#39;, &#39;input_buffer_adc_time&#39;, and</span>
<span class="sd">                          &#39;output_buffer_dac_time&#39;.</span>
<span class="sd">        status (int): Status flag that indicates if there are any errors or issues</span>
<span class="sd">                      with the audio stream.</span>

<span class="sd">    Returns:</span>
<span class="sd">        tuple: A tuple containing the input data (as it was received) and a</span>
<span class="sd">               PyAudio continuation flag (pyaudio.paContinue) indicating that</span>
<span class="sd">               audio processing should continue.</span>

<span class="sd">    Raises:</span>
<span class="sd">        Exception: Catches and logs any exceptions raised during audio processing,</span>
<span class="sd">                   particularly when predicting pitch or converting frequency to MIDI.</span>

<span class="sd">    Notes:</span>
<span class="sd">        This function should be used as part of a streaming setup with PyAudio where</span>
<span class="sd">        real-time audio processing is required. It uses numpy for numerical operations,</span>
<span class="sd">        CREPE for pitch detection, and librosa for frequency-to-MIDI conversion.</span>
<span class="sd">    &quot;&quot;&quot;</span>


    <span class="n">audio_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">frombuffer</span><span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">float32</span><span class="p">)</span>


    <span class="c1"># Apply bandpass filter</span>
    <span class="n">filtered_audio</span> <span class="o">=</span> <span class="n">butter_bandpass_filter</span><span class="p">(</span><span class="n">audio_data</span><span class="p">,</span> <span class="n">lowcut</span><span class="o">=</span><span class="mi">80</span><span class="p">,</span> <span class="n">highcut</span><span class="o">=</span><span class="mi">7000</span><span class="p">,</span> <span class="n">sr</span><span class="o">=</span><span class="mi">16000</span><span class="p">)</span>


    <span class="k">try</span><span class="p">:</span>
        <span class="n">time</span><span class="p">,</span> <span class="n">frequency</span><span class="p">,</span> <span class="n">confidence</span><span class="p">,</span> <span class="n">activation</span> <span class="o">=</span> <span class="n">crepe</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">filtered_audio</span><span class="p">,</span> <span class="mi">16000</span><span class="p">,</span> <span class="n">step_size</span><span class="o">=</span><span class="mi">50</span><span class="p">,</span> <span class="n">viterbi</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="c1"># K.clear_session()</span>
       
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">confidence</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">best_idx</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">argmax</span><span class="p">(</span><span class="n">confidence</span><span class="p">)</span>
            <span class="n">freq</span> <span class="o">=</span> <span class="n">frequency</span><span class="p">[</span><span class="n">best_idx</span><span class="p">]</span>
            <span class="n">midi_number</span> <span class="o">=</span> <span class="n">librosa</span><span class="o">.</span><span class="n">hz_to_midi</span><span class="p">(</span><span class="n">freq</span><span class="p">)</span>

            <span class="k">global</span> <span class="n">main_midi_number_arr</span>
            <span class="n">main_midi_number_arr</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">midi_number</span><span class="p">))</span>
            <span class="n">main_midi_number_arr</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>


            <span class="n">amplitude</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sqrt</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">filtered_audio</span><span class="o">**</span><span class="mi">2</span><span class="p">))</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Pitch: </span><span class="si">{</span><span class="n">midi_number_to_pitch</span><span class="p">(</span><span class="n">midi_number</span><span class="p">)</span><span class="si">}</span><span class="s2">, Frequency: </span><span class="si">{</span><span class="n">freq</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2"> Hz, Confidence: </span><span class="si">{</span><span class="n">confidence</span><span class="p">[</span><span class="n">best_idx</span><span class="p">]</span><span class="si">:</span><span class="s2">.2f</span><span class="si">}</span><span class="s2">, Amplitude: </span><span class="si">{</span><span class="n">amplitude</span><span class="si">:</span><span class="s2">.5f</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error processing audio: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>


    <span class="k">return</span> <span class="p">(</span><span class="n">in_data</span><span class="p">,</span> <span class="n">pyaudio</span><span class="o">.</span><span class="n">paContinue</span><span class="p">)</span></div>

</pre></div>

           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Ben Spence, Jonas Land, AJ Baudino, Hexin Hu, Tripper Wright.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>